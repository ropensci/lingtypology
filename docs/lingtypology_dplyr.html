<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="George Moroz" />


<title>lingtypology and other packages</title>

<script src="site_libs/header-attrs-2.25/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/lumen.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="site_libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="site_libs/leaflet-1.3.1/leaflet.js"></script>
<link href="site_libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="site_libs/proj4-2.6.2/proj4.min.js"></script>
<script src="site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="site_libs/leaflet-binding-2.2.1/leaflet.js"></script>
<script src="site_libs/leaflet-providers-2.0.0/leaflet-providers_2.0.0.js"></script>
<script src="site_libs/leaflet-providers-plugin-2.2.1/leaflet-providers-plugin.js"></script>
<link href="site_libs/leaflet-minimap-3.3.1/Control.MiniMap.min.css" rel="stylesheet" />
<script src="site_libs/leaflet-minimap-3.3.1/Control.MiniMap.min.js"></script>
<script src="site_libs/leaflet-minimap-3.3.1/Minimap-binding.js"></script>
<link href="site_libs/lfx-draw-1.0.2/lfx-draw-prod.css" rel="stylesheet" />
<script src="site_libs/lfx-draw-1.0.2/lfx-draw-prod.js"></script>
<script src="site_libs/lfx-draw-1.0.2/lfx-draw-bindings.js"></script>
<script src="site_libs/lfx-draw-drag-1.0.2/lfx-draw-drag-prod.js"></script>
<link href="site_libs/lfx-styleeditor-0.1.6/lfx-styleeditor-prod.css" rel="stylesheet" />
<script src="site_libs/lfx-styleeditor-0.1.6/lfx-styleeditor-prod.js"></script>
<script src="site_libs/lfx-styleeditor-0.1.6/lfx-styleeditor-bindings.js"></script>
<link href="site_libs/lfx-fullscreen-1.0.2/lfx-fullscreen-prod.css" rel="stylesheet" />
<script src="site_libs/lfx-fullscreen-1.0.2/lfx-fullscreen-prod.js"></script>
<script src="site_libs/Leaflet.Sync-0.0.5/L.Map.Sync.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #204a87; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #204a87; font-weight: bold; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #ce5c00; font-weight: bold; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>







<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">lingtypology</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="index.html">installation</a>
</li>
<li>
  <a href="lingtypology_glottolog_functions.html">Glottolog functions</a>
</li>
<li>
  <a href="lingtypology_creating_maps.html">creating maps</a>
</li>
<li>
  <a href="lingtypology_db_API.html">databases API</a>
</li>
<li>
  <a href="lingtypology_dplyr.html">lingtypology and other packages</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore"><code>lingtypology</code> and other
packages</h1>
<h4 class="author"><a href="mailto:agricolamz@gmail.com">George
Moroz</a></h4>

</div>


<div id="dplyr-and-pipe" class="section level3">
<h3>1. <code>dplyr</code> and pipe <code>|&gt;</code></h3>
<p>It is possible to use <a
href="https://github.com/tidyverse/dplyr"><code>dplyr</code></a>
functions and pipes with <code>lingtypology</code>. It is widely used,
so I will give some examples, how to use it with
the<code>lingtypology</code> package. Using query “list of languages
csv” I found Vincent Garnier’s <a
href="https://github.com/forxer/languages-list">languages-list
repository</a>. Let’s download and map all the languages from that set.
First download the data:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>new_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;https://goo.gl/GgscBE&quot;</span>)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">tail</span>(new_data)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["X639.1"],"name":[1],"type":["chr"],"align":["left"]},{"label":["X639.2.T"],"name":[2],"type":["chr"],"align":["left"]},{"label":["X639.2.B"],"name":[3],"type":["chr"],"align":["left"]},{"label":["Language.name"],"name":[4],"type":["chr"],"align":["left"]},{"label":["Native.name"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"xh","2":"xho","3":"xho","4":"Xhosa","5":"isiXhosa","_rn_":"180"},{"1":"yi","2":"yid","3":"yid","4":"Yiddish","5":"ייִדיש","_rn_":"181"},{"1":"yo","2":"yor","3":"yor","4":"Yoruba","5":"Yorùbá","_rn_":"182"},{"1":"za","2":"zha","3":"zha","4":"Zhuang, Chuang","5":"Saɯ cueŋƅ, Saw cuengh","_rn_":"183"},{"1":"zh","2":"zho","3":"chi","4":"Chinese","5":"中文 (Zhōngwén), 汉语, 漢語","_rn_":"184"},{"1":"zu","2":"zul","3":"zul","4":"Zulu","5":"isiZulu","_rn_":"185"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>As we see, some values of the <code>Language.name</code> variable
contain more than one language name. Some of the names probably have
different names in our database. Imagine that we want to map all
languages from Africa. So that the following examples work correctly,
use <code>library(dplyr)</code>.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>new_data <span class="sc">|&gt;</span> </span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Language.name =</span> <span class="fu">gsub</span>(<span class="at">pattern =</span> <span class="st">&quot; &quot;</span>, <span class="at">replacement =</span> <span class="st">&quot;&quot;</span>, Language.name)) <span class="sc">|&gt;</span>  </span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.glottolog</span>(Language.name) <span class="sc">==</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span>  </span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">area.lang</span>(Language.name) <span class="sc">==</span> <span class="st">&quot;Africa&quot;</span>) <span class="sc">|&gt;</span>  </span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>  <span class="fu">select</span>(Language.name) <span class="sc">|&gt;</span> </span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>  <span class="fu">map.feature</span>()</span></code></pre></div>
<div class="leaflet html-widget html-fill-item" id="htmlwidget-244aaddf2639520a3f5a" style="width:720px;height:326.4px;"></div>
<script type="application/json" data-for="htmlwidget-244aaddf2639520a3f5a">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"zoomControl":false},"calls":[{"method":"addTiles","args":["OpenStreetMap.Mapnik",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false}]},{"method":"addProviderTiles","args":["OpenStreetMap.Mapnik",null,"OpenStreetMap.Mapnik",{"errorTileUrl":"","noWrap":false,"opacity":1,"detectRetina":false}]},{"method":"addCircleMarkers","args":[[12.2281,-22,6.34756,11.708182,12.9,6.46061,11.1513,-21.0231,4.62705,0.66884,-8.281599999999999,-17.22,-1.56771,6.78584,-17.20849,4.778704,-26,-8.25605,15.3359,-24.368,-23.5754,6.34756,-22.188,15.2534,-31.0389,7.15345,-28.9],[41.8083,30,-1.33254,39.543456,-7.65,0.814975,8.7804,20.5655,7.23441,32.15153,25.8918,17.35,29.6441,20.1702,29.75725,45.152856,31.5,37.624,38.9266,24.7587,31.8105,-1.33254,29.9523,-15.383,28.0769,3.67225,30.2],5,null,["","","","","","","","","","","","","","","","","","","","","","","","","","",""],{"interactive":true,"className":"","stroke":false,"color":"#03F","weight":1,"opacity":0.5,"fill":true,"fillColor":["#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6"],"fillOpacity":1},null,null,["<a href='https://glottolog.org/resource/languoid/id/afar1241' target='_blank'>Afar<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/afri1274' target='_blank'>Afrikaans<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/akan1250' target='_blank'>Akan<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/amha1245' target='_blank'>Amharic<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/bamb1269' target='_blank'>Bambara<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/ewee1241' target='_blank'>Ewe<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/haus1257' target='_blank'>Hausa<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/here1253' target='_blank'>Herero<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/nucl1417' target='_blank'>Igbo<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/gand1255' target='_blank'>Ganda<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/luba1250' target='_blank'>Luba-Katanga<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/ndon1254' target='_blank'>Ndonga<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kiny1244' target='_blank'>Kinyarwanda<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/sang1328' target='_blank'>Sango<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/shon1251' target='_blank'>Shona<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/soma1255' target='_blank'>Somali<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/swat1243' target='_blank'>Swati<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/swah1253' target='_blank'>Swahili<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/tigr1271' target='_blank'>Tigrinya<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/tswa1253' target='_blank'>Tswana<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/tson1249' target='_blank'>Tsonga<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/twii1234' target='_blank'>Twi<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/vend1245' target='_blank'>Venda<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/nucl1347' target='_blank'>Wolof<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/xhos1239' target='_blank'>Xhosa<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/yoru1245' target='_blank'>Yoruba<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/zulu1248' target='_blank'>Zulu<\/a><br>"],null,null,{"interactive":false,"permanent":false,"direction":"right","opacity":1,"offset":[7.5,0],"textsize":"10px","textOnly":true,"style":{"font-size":"15px","font-family":"sans-serif"},"className":"","sticky":true},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]}],"limits":{"lat":[-31.0389,15.3359],"lng":[-15.383,45.152856]}},"evals":[],"jsHooks":[]}</script>
<p>We start with a dataframe, here a <code>new_data</code>. First we
remove spaces at the end of each string. Then we check, whether the
language names are in the glottolog database. Then we select only rows
that contain languages of Africa. Then we select the
<code>Language.name</code> variable. And the last line maps all selected
languages.</p>
<p>By default, the values that came from the pipe are treated as the
first argument of a function. But when there are some additional
arguments, underline sign specify what exact position should be piped
to. Let’s produce the same map with a minimap.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>new_data <span class="sc">|&gt;</span> </span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Language.name =</span> <span class="fu">gsub</span>(<span class="at">pattern =</span> <span class="st">&quot; &quot;</span>, <span class="at">replacement =</span> <span class="st">&quot;&quot;</span>, Language.name)) <span class="sc">|&gt;</span>  </span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.glottolog</span>(Language.name) <span class="sc">==</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span>  </span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">area.lang</span>(Language.name) <span class="sc">==</span> <span class="st">&quot;Africa&quot;</span>) <span class="sc">|&gt;</span>  </span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>  <span class="fu">select</span>(Language.name) <span class="sc">|&gt;</span> </span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a>  <span class="fu">map.feature</span>(<span class="at">languages =</span> _, <span class="at">minimap =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<div class="leaflet html-widget html-fill-item" id="htmlwidget-6f66dca5431bfb50b4e6" style="width:720px;height:326.4px;"></div>
<script type="application/json" data-for="htmlwidget-6f66dca5431bfb50b4e6">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"zoomControl":false},"calls":[{"method":"addTiles","args":["OpenStreetMap.Mapnik",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false}]},{"method":"addProviderTiles","args":["OpenStreetMap.Mapnik",null,"OpenStreetMap.Mapnik",{"errorTileUrl":"","noWrap":false,"opacity":1,"detectRetina":false}]},{"method":"addCircleMarkers","args":[[12.2281,-22,6.34756,11.708182,12.9,6.46061,11.1513,-21.0231,4.62705,0.66884,-8.281599999999999,-17.22,-1.56771,6.78584,-17.20849,4.778704,-26,-8.25605,15.3359,-24.368,-23.5754,6.34756,-22.188,15.2534,-31.0389,7.15345,-28.9],[41.8083,30,-1.33254,39.543456,-7.65,0.814975,8.7804,20.5655,7.23441,32.15153,25.8918,17.35,29.6441,20.1702,29.75725,45.152856,31.5,37.624,38.9266,24.7587,31.8105,-1.33254,29.9523,-15.383,28.0769,3.67225,30.2],5,null,["","","","","","","","","","","","","","","","","","","","","","","","","","",""],{"interactive":true,"className":"","stroke":false,"color":"#03F","weight":1,"opacity":0.5,"fill":true,"fillColor":["#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6"],"fillOpacity":1},null,null,["<a href='https://glottolog.org/resource/languoid/id/afar1241' target='_blank'>Afar<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/afri1274' target='_blank'>Afrikaans<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/akan1250' target='_blank'>Akan<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/amha1245' target='_blank'>Amharic<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/bamb1269' target='_blank'>Bambara<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/ewee1241' target='_blank'>Ewe<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/haus1257' target='_blank'>Hausa<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/here1253' target='_blank'>Herero<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/nucl1417' target='_blank'>Igbo<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/gand1255' target='_blank'>Ganda<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/luba1250' target='_blank'>Luba-Katanga<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/ndon1254' target='_blank'>Ndonga<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kiny1244' target='_blank'>Kinyarwanda<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/sang1328' target='_blank'>Sango<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/shon1251' target='_blank'>Shona<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/soma1255' target='_blank'>Somali<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/swat1243' target='_blank'>Swati<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/swah1253' target='_blank'>Swahili<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/tigr1271' target='_blank'>Tigrinya<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/tswa1253' target='_blank'>Tswana<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/tson1249' target='_blank'>Tsonga<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/twii1234' target='_blank'>Twi<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/vend1245' target='_blank'>Venda<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/nucl1347' target='_blank'>Wolof<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/xhos1239' target='_blank'>Xhosa<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/yoru1245' target='_blank'>Yoruba<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/zulu1248' target='_blank'>Zulu<\/a><br>"],null,null,{"interactive":false,"permanent":false,"direction":"right","opacity":1,"offset":[7.5,0],"textsize":"10px","textOnly":true,"style":{"font-size":"15px","font-family":"sans-serif"},"className":"","sticky":true},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addMiniMap","args":[null,"OpenStreetMap.Mapnik","bottomright",150,150,19,19,-5,false,false,false,true,false,false,{"color":"#ff7800","weight":1,"clickable":false},{"color":"#000000","weight":1,"clickable":false,"opacity":0,"fillOpacity":0},{"hideText":"Hide MiniMap","showText":"Show MiniMap"},[]]}],"limits":{"lat":[-31.0389,15.3359],"lng":[-15.383,45.152856]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="leaflet-leaflet.extras-mapview-mapedit" class="section level3">
<h3>2. <code>leaflet</code>, <code>leaflet.extras</code>,
<code>mapview</code>, <code>mapedit</code></h3>
<p>There is also a possibility to use <code>lingtypology</code> with
other <a
href="https://github.com/rstudio/leaflet"><code>leaflet</code></a>
functions (thanks to <a href="https://github.com/nikopartanen">Niko
Partanen</a> for the idea):</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">library</span>(leaflet)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;leaflet&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:lingtypology&#39;:
## 
##     providers</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="fu">map.feature</span>(<span class="fu">c</span>(<span class="st">&quot;French&quot;</span>, <span class="st">&quot;Occitan&quot;</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>  <span class="fu">fitBounds</span>(<span class="dv">0</span>, <span class="dv">40</span>, <span class="dv">10</span>, <span class="dv">50</span>) <span class="sc">|&gt;</span> </span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>  <span class="fu">addPopups</span>(<span class="dv">2</span>, <span class="dv">48</span>, <span class="st">&quot;Great day!&quot;</span>)</span></code></pre></div>
<div class="leaflet html-widget html-fill-item" id="htmlwidget-0fe3e3821db73c9def68" style="width:720px;height:326.4px;"></div>
<script type="application/json" data-for="htmlwidget-0fe3e3821db73c9def68">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"zoomControl":false},"calls":[{"method":"addTiles","args":["OpenStreetMap.Mapnik",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false}]},{"method":"addProviderTiles","args":["OpenStreetMap.Mapnik",null,"OpenStreetMap.Mapnik",{"errorTileUrl":"","noWrap":false,"opacity":1,"detectRetina":false}]},{"method":"addCircleMarkers","args":[[48,44.1415],[2,6.82979],5,null,["",""],{"interactive":true,"className":"","stroke":false,"color":"#03F","weight":1,"opacity":0.5,"fill":true,"fillColor":["#3B8BC6","#3B8BC6"],"fillOpacity":1},null,null,["<a href='https://glottolog.org/resource/languoid/id/stan1290' target='_blank'>French<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/occi1239' target='_blank'>Occitan<\/a><br>"],null,null,{"interactive":false,"permanent":false,"direction":"right","opacity":1,"offset":[7.5,0],"textsize":"10px","textOnly":true,"style":{"font-size":"15px","font-family":"sans-serif"},"className":"","sticky":true},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addPopups","args":[48,2,"Great day!",null,null,{"maxWidth":300,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"className":""}]}],"limits":{"lat":[44.1415,48],"lng":[2,6.82979]},"fitBounds":[40,0,50,10,[]]},"evals":[],"jsHooks":[]}</script>
<p>If you add <code>leaflet</code> arguments befor
<code>map.feature</code> function, you need to use argument
<code>pipe.data = _</code>:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">leaflet</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>  <span class="fu">fitBounds</span>(<span class="dv">0</span>, <span class="dv">40</span>, <span class="dv">10</span>, <span class="dv">50</span>) <span class="sc">|&gt;</span> </span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>  <span class="fu">addPopups</span>(<span class="dv">2</span>, <span class="dv">48</span>, <span class="st">&quot;Great day!&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>  <span class="fu">map.feature</span>(<span class="fu">c</span>(<span class="st">&quot;French&quot;</span>, <span class="st">&quot;Occitan&quot;</span>), <span class="at">pipe.data =</span> _)</span></code></pre></div>
<div class="leaflet html-widget html-fill-item" id="htmlwidget-765d4e01b40dfad9998a" style="width:720px;height:326.4px;"></div>
<script type="application/json" data-for="htmlwidget-765d4e01b40dfad9998a">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"fitBounds":[40,0,50,10,[]],"calls":[{"method":"addPopups","args":[48,2,"Great day!",null,null,{"maxWidth":300,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"className":""}]},{"method":"addTiles","args":["OpenStreetMap.Mapnik",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false}]},{"method":"addProviderTiles","args":["OpenStreetMap.Mapnik",null,"OpenStreetMap.Mapnik",{"errorTileUrl":"","noWrap":false,"opacity":1,"detectRetina":false}]},{"method":"addCircleMarkers","args":[[48,44.1415],[2,6.82979],5,null,["",""],{"interactive":true,"className":"","stroke":false,"color":"#03F","weight":1,"opacity":0.5,"fill":true,"fillColor":["#3B8BC6","#3B8BC6"],"fillOpacity":1},null,null,["<a href='https://glottolog.org/resource/languoid/id/stan1290' target='_blank'>French<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/occi1239' target='_blank'>Occitan<\/a><br>"],null,null,{"interactive":false,"permanent":false,"direction":"right","opacity":1,"offset":[7.5,0],"textsize":"10px","textOnly":true,"style":{"font-size":"15px","font-family":"sans-serif"},"className":"","sticky":true},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]}],"limits":{"lat":[44.1415,48],"lng":[2,6.82979]}},"evals":[],"jsHooks":[]}</script>
<p>The other usage of this <code>pipe.data</code> argument is to put
there a variable with a <code>leaflet</code> object:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">leaflet</span>() <span class="sc">|&gt;</span> </span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>  <span class="fu">fitBounds</span>(<span class="dv">0</span>, <span class="dv">40</span>, <span class="dv">10</span>, <span class="dv">50</span>) <span class="sc">|&gt;</span> </span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>  <span class="fu">addPopups</span>(<span class="dv">2</span>, <span class="dv">48</span>, <span class="st">&quot;Great day!&quot;</span>)</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a><span class="fu">map.feature</span>(<span class="fu">c</span>(<span class="st">&quot;French&quot;</span>, <span class="st">&quot;Occitan&quot;</span>), <span class="at">pipe.data =</span> m)</span></code></pre></div>
<div class="leaflet html-widget html-fill-item" id="htmlwidget-ce9f0d7c6184f0c4b1ad" style="width:720px;height:326.4px;"></div>
<script type="application/json" data-for="htmlwidget-ce9f0d7c6184f0c4b1ad">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"fitBounds":[40,0,50,10,[]],"calls":[{"method":"addPopups","args":[48,2,"Great day!",null,null,{"maxWidth":300,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"className":""}]},{"method":"addTiles","args":["OpenStreetMap.Mapnik",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false}]},{"method":"addProviderTiles","args":["OpenStreetMap.Mapnik",null,"OpenStreetMap.Mapnik",{"errorTileUrl":"","noWrap":false,"opacity":1,"detectRetina":false}]},{"method":"addCircleMarkers","args":[[48,44.1415],[2,6.82979],5,null,["",""],{"interactive":true,"className":"","stroke":false,"color":"#03F","weight":1,"opacity":0.5,"fill":true,"fillColor":["#3B8BC6","#3B8BC6"],"fillOpacity":1},null,null,["<a href='https://glottolog.org/resource/languoid/id/stan1290' target='_blank'>French<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/occi1239' target='_blank'>Occitan<\/a><br>"],null,null,{"interactive":false,"permanent":false,"direction":"right","opacity":1,"offset":[7.5,0],"textsize":"10px","textOnly":true,"style":{"font-size":"15px","font-family":"sans-serif"},"className":"","sticky":true},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]}],"limits":{"lat":[44.1415,48],"lng":[2,6.82979]}},"evals":[],"jsHooks":[]}</script>
<p>If you want to define tiles in <code>leaflet</code> part, you need to
change tile argument in <code>map.feature</code> function, because the
default value for the <code>tile</code> argument is
“OpenStreetMap.Mapnik”.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="fu">leaflet</span>()  <span class="sc">|&gt;</span> </span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>  <span class="fu">addProviderTiles</span>(<span class="st">&quot;Stamen.TonerLite&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a>  <span class="fu">fitBounds</span>(<span class="dv">0</span>, <span class="dv">40</span>, <span class="dv">10</span>, <span class="dv">50</span>) <span class="sc">|&gt;</span> </span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>  <span class="fu">addPopups</span>(<span class="dv">2</span>, <span class="dv">48</span>, <span class="st">&quot;Great day!&quot;</span>) <span class="sc">|&gt;</span>  </span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a>  <span class="fu">map.feature</span>(<span class="fu">c</span>(<span class="st">&quot;French&quot;</span>, <span class="st">&quot;Occitan&quot;</span>), <span class="at">pipe.data =</span> _, <span class="at">tile =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<div class="leaflet html-widget html-fill-item" id="htmlwidget-53dee765ee68118ad5ce" style="width:720px;height:326.4px;"></div>
<script type="application/json" data-for="htmlwidget-53dee765ee68118ad5ce">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["Stamen.TonerLite",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addPopups","args":[48,2,"Great day!",null,null,{"maxWidth":300,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"className":""}]},{"method":"addCircleMarkers","args":[[48,44.1415],[2,6.82979],5,null,["",""],{"interactive":true,"className":"","stroke":false,"color":"#03F","weight":1,"opacity":0.5,"fill":true,"fillColor":["#3B8BC6","#3B8BC6"],"fillOpacity":1},null,null,["<a href='https://glottolog.org/resource/languoid/id/stan1290' target='_blank'>French<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/occi1239' target='_blank'>Occitan<\/a><br>"],null,null,{"interactive":false,"permanent":false,"direction":"right","opacity":1,"offset":[7.5,0],"textsize":"10px","textOnly":true,"style":{"font-size":"15px","font-family":"sans-serif"},"className":"","sticky":true},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]}],"fitBounds":[40,0,50,10,[]],"limits":{"lat":[44.1415,48],"lng":[2,6.82979]}},"evals":[],"jsHooks":[]}</script>
<p>It is also possible to use some tools provided by <a
href="https://github.com/RCura/leaflet.extras"><code>leaflet.extras</code>
package</a>:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="fu">map.feature</span>(<span class="fu">c</span>(<span class="st">&quot;French&quot;</span>, <span class="st">&quot;Occitan&quot;</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>  leaflet.extras<span class="sc">::</span><span class="fu">addDrawToolbar</span>()  <span class="sc">|&gt;</span> </span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>  leaflet.extras<span class="sc">::</span><span class="fu">addStyleEditor</span>()</span></code></pre></div>
<div class="leaflet html-widget html-fill-item" id="htmlwidget-3660577fbd7cc21ad928" style="width:720px;height:326.4px;"></div>
<script type="application/json" data-for="htmlwidget-3660577fbd7cc21ad928">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"zoomControl":false},"calls":[{"method":"addTiles","args":["OpenStreetMap.Mapnik",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false}]},{"method":"addProviderTiles","args":["OpenStreetMap.Mapnik",null,"OpenStreetMap.Mapnik",{"errorTileUrl":"","noWrap":false,"opacity":1,"detectRetina":false}]},{"method":"addCircleMarkers","args":[[48,44.1415],[2,6.82979],5,null,["",""],{"interactive":true,"className":"","stroke":false,"color":"#03F","weight":1,"opacity":0.5,"fill":true,"fillColor":["#3B8BC6","#3B8BC6"],"fillOpacity":1},null,null,["<a href='https://glottolog.org/resource/languoid/id/stan1290' target='_blank'>French<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/occi1239' target='_blank'>Occitan<\/a><br>"],null,null,{"interactive":false,"permanent":false,"direction":"right","opacity":1,"offset":[7.5,0],"textsize":"10px","textOnly":true,"style":{"font-size":"15px","font-family":"sans-serif"},"className":"","sticky":true},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addDrawToolbar","args":[null,null,{"position":"topleft","draw":{"polyline":{"allowIntersection":true,"drawError":{"color":"#b00b00","timeout":2500},"guidelineDistance":20,"maxGuideLineLength":4000,"showLength":true,"metric":true,"feet":true,"nautic":false,"zIndexOffset":2000,"shapeOptions":{"stroke":true,"color":"#03f","weight":1,"opacity":1,"fill":false,"fillColor":"#03f","fillOpacity":0.4,"clickable":true,"smoothFactor":1,"noClip":true},"repeatMode":false},"polygon":{"showArea":false,"metric":true,"shapeOptions":{"stroke":true,"color":"#03f","weight":1,"opacity":1,"fill":true,"fillColor":"#03f","fillOpacity":0.4,"clickable":true,"smoothFactor":1,"noClip":true},"repeatMode":false},"circle":{"shapeOptions":{"stroke":true,"color":"#03f","weight":1,"opacity":1,"fill":true,"fillColor":"#03f","fillOpacity":0.4,"clickable":true,"smoothFactor":1,"noClip":true},"repeatMode":false,"showRadius":true,"metric":true,"feet":true,"nautic":false},"rectangle":{"showArea":true,"metric":true,"shapeOptions":{"stroke":true,"color":"#03f","weight":1,"opacity":1,"fill":true,"fillColor":"#03f","fillOpacity":0.4,"clickable":true,"smoothFactor":1,"noClip":true},"repeatMode":false},"marker":{"zIndexOffset":2000,"repeatMode":false},"circlemarker":{"stroke":true,"color":"#3388ff","weight":4,"opacity":0.5,"fill":true,"fillOpacity":0.2,"clickable":true,"zIndexOffset":2000,"repeatMode":false},"singleFeature":false},"edit":false}]},{"method":"addStyleEditor","args":[{"position":"topleft","openOnLeafletDraw":true,"useGrouping":false}]}],"limits":{"lat":[44.1415,48],"lng":[2,6.82979]}},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">map.feature</span>(<span class="fu">c</span>(<span class="st">&quot;French&quot;</span>, <span class="st">&quot;Occitan&quot;</span>)) <span class="sc">|&gt;</span>  </span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>  leaflet.extras<span class="sc">::</span><span class="fu">addFullscreenControl</span>()</span></code></pre></div>
<div class="leaflet html-widget html-fill-item" id="htmlwidget-8589322e582af348dee7" style="width:720px;height:326.4px;"></div>
<script type="application/json" data-for="htmlwidget-8589322e582af348dee7">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"zoomControl":false,"fullscreenControl":{"position":"topleft","pseudoFullscreen":false}},"calls":[{"method":"addTiles","args":["OpenStreetMap.Mapnik",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false}]},{"method":"addProviderTiles","args":["OpenStreetMap.Mapnik",null,"OpenStreetMap.Mapnik",{"errorTileUrl":"","noWrap":false,"opacity":1,"detectRetina":false}]},{"method":"addCircleMarkers","args":[[48,44.1415],[2,6.82979],5,null,["",""],{"interactive":true,"className":"","stroke":false,"color":"#03F","weight":1,"opacity":0.5,"fill":true,"fillColor":["#3B8BC6","#3B8BC6"],"fillOpacity":1},null,null,["<a href='https://glottolog.org/resource/languoid/id/stan1290' target='_blank'>French<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/occi1239' target='_blank'>Occitan<\/a><br>"],null,null,{"interactive":false,"permanent":false,"direction":"right","opacity":1,"offset":[7.5,0],"textsize":"10px","textOnly":true,"style":{"font-size":"15px","font-family":"sans-serif"},"className":"","sticky":true},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]}],"limits":{"lat":[44.1415,48],"lng":[2,6.82979]}},"evals":[],"jsHooks":[]}</script>
<p>Also there is a nice package <code>mapedit</code> that provide a
possibility of creating and editing of leaflet objects by hand:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="fu">map.feature</span>(<span class="fu">c</span>(<span class="st">&quot;Kabardian&quot;</span>, <span class="st">&quot;Russian&quot;</span>)) <span class="sc">|&gt;</span>  </span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>  mapedit<span class="sc">::</span><span class="fu">editMap</span>() <span class="ot">-&gt;</span></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>  my_polygone</span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a><span class="fu">map.feature</span>(<span class="fu">c</span>(<span class="st">&quot;Kabardian&quot;</span>, <span class="st">&quot;Russian&quot;</span>)) <span class="sc">|&gt;</span>  </span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a>  leaflet<span class="sc">::</span><span class="fu">addPolygons</span>(<span class="at">data =</span> my_polygone<span class="sc">$</span>finished)</span></code></pre></div>
<p><img
src="https://raw.githubusercontent.com/ropensci/lingtypology/master/docs/use_mapedit.gif" /></p>
</div>
<div id="combining-maps-in-a-grid-and-facetisation-with-mapview"
class="section level3">
<h3>3. Combining maps in a grid and facetisation with
<code>mapview</code></h3>
<p>The <a
href="https://github.com/r-spatial/leafsync"><code>leafsync</code>
package</a> provides a possibility to create a multiple maps in a grid
and even synchronise them. There are two functions for that:
<code>latticeview()</code> and <code>sync()</code>. Facetisation is a
really powerfull tool (look for <code>facet_grid()</code> and
<code>facet_wrap()</code> functions from <code>ggplot2</code>).
<code>lingtypology</code> doesn’t provide a facetisation itself, but the
<code>facet</code> argument of the <code>map.feature()</code> function
create a list of maps based on this variable. The result of the work of
this function then is changed: instead of creating a map in Viewer pane
it will return a list that could be used in <code>latticeview()</code>
and <code>sync()</code> functions from the <code>leafsync</code>
package.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a>faceted <span class="ot">&lt;-</span> <span class="fu">map.feature</span>(circassian<span class="sc">$</span>language,</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>                       <span class="at">latitude =</span> circassian<span class="sc">$</span>latitude,</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a>                       <span class="at">longitude =</span> circassian<span class="sc">$</span>longitude,</span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a>                       <span class="at">features =</span> circassian<span class="sc">$</span>dialect,</span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a>                       <span class="at">facet =</span> circassian<span class="sc">$</span>language)</span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a><span class="fu">library</span>(leafsync)</span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a><span class="fu">sync</span>(faceted, <span class="at">no.initial.sync =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<div style="display:inline;width:49%;float:left;border-style:solid;border-color:#BEBEBE;border-width:1px 1px 1px 1px;">
<div class="leaflet html-widget html-fill-item" id="htmlwidget-6334" style="width:100%;height:400px;"></div>
<script type="application/json" data-for="htmlwidget-6334">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"zoomControl":false},"calls":[{"method":"addTiles","args":["OpenStreetMap.Mapnik",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false}]},{"method":"addProviderTiles","args":["OpenStreetMap.Mapnik",null,"OpenStreetMap.Mapnik",{"errorTileUrl":"","noWrap":false,"opacity":1,"detectRetina":false}]},{"method":"addCircleMarkers","args":[[45.18333,43.822786,43.833917,43.968217,44.009389,44.009397,44.00941,44.075833,44.116389,44.184722,44.28361,44.631132,44.644722,44.835,44.835,44.845,44.865,44.866667,44.87391,44.874722,44.883056,44.883942,44.887778,44.892527,44.9025,44.905,44.905,44.915421,44.921111,44.9225,44.926111,44.933889,44.941667,44.946389,44.950833,44.954747,44.965,44.983056,44.987351,44.993333,44.994444,44.9975,44.999167,45.011389,45.02,45.023972,45.034167,45.045278,45.046111,45.051111,45.065556,45.068889,45.072222,45.083889,45.092222],[39.66667,39.500981,39.508069,39.447133,39.356639,39.335326,39.36232,39.3425,39.301667,39.07,38.953618,40.072682,40.225833,39.208056,41.38389,39.467778,38.988056,39.283333,39.153554,39.457778,39.383056,39.066682,39.266111,39.233689,39.174722,39.4175,39.275,39.39023,38.992778,39.382778,39.566944,38.836944,39.369444,39.41,39.114444,40.317685,39.367778,39.476111,38.715489,40.311389,39.0025,40.392222,38.781944,40.217222,40.23,38.936994,38.894722,38.756111,40.183056,38.706389,40.174167,39.4975,40.188611,39.861389,40.110278],5,null,["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],{"interactive":true,"className":"","stroke":false,"color":"#03F","weight":1,"opacity":0.5,"fill":true,"fillColor":["#E62651","#8D63B9","#8D63B9","#35A532","#8D63B9","#8D63B9","#8D63B9","#E62651","#E62651","#35A532","#35A532","#F78716","#F78716","#F78716","#E62651","#F78716","#35A532","#F78716","#F78716","#F78716","#F78716","#F78716","#F78716","#F78716","#F78716","#F78716","#F78716","#F78716","#F78716","#F78716","#F78716","#F78716","#F78716","#F78716","#F78716","#E62651","#F78716","#F78716","#35A532","#E62651","#F78716","#E62651","#35A532","#E62651","#3B8BC6","#F78716","#F78716","#35A532","#E62651","#35A532","#E62651","#E62651","#E62651","#E62651","#E62651"],"fillOpacity":1},null,null,["<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/adyg1241' target='_blank'>West Circassian<\/a><br>"],null,null,{"interactive":false,"permanent":false,"direction":"right","opacity":1,"offset":[7.5,0],"textsize":"10px","textOnly":true,"style":{"font-size":"15px","font-family":"sans-serif"},"className":"","sticky":true},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addLegend","args":[{"colors":["#3B8BC6","#F78716","#35A532","#E62651","#8D63B9"],"labels":["Abadzex","Bzhedukh","Shapsug","Temirgoy","Xakuch"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"West Circassian ","extra":null,"layerId":null,"className":"info legend","group":null}]}],"limits":{"lat":[43.822786,45.18333],"lng":[38.706389,41.38389]}},"evals":[],"jsHooks":[]}</script>
</div>
<div style="display:inline;width:49%;float:left;border-style:solid;border-color:#BEBEBE;border-width:1px 1px 1px 1px;">
<div class="leaflet html-widget html-fill-item" id="htmlwidget-3176" style="width:100%;height:400px;"></div>
<script type="application/json" data-for="htmlwidget-3176">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"zoomControl":false},"calls":[{"method":"addTiles","args":["OpenStreetMap.Mapnik",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false}]},{"method":"addProviderTiles","args":["OpenStreetMap.Mapnik",null,"OpenStreetMap.Mapnik",{"errorTileUrl":"","noWrap":false,"opacity":1,"detectRetina":false}]},{"method":"addCircleMarkers","args":[[43.0925184,43.2177484,43.2602459,43.3178415,43.33389,43.3423158,43.3434394,43.3480839,43.3506587,43.380478,43.3807323,43.3933553,43.4118144,43.4535606,43.4662834,43.4677348,43.47468,43.4778111,43.4781181,43.4855758,43.4991098,43.5039956,43.5059194,43.52444,43.5254017,43.5265677,43.5385977,43.5405887,43.5434888,43.5528175,43.55417,43.5573675,43.5577039,43.5612695,43.5665554,43.5678968,43.5701144,43.5780738,43.6033238,43.6055277,43.60694,43.6101972,43.6147962,43.6157546,43.6197557,43.6295975,43.63194,43.63722,43.6464595,43.6489847,43.649167,43.6612534,43.6655922,43.6708678,43.6710761,43.6727795,43.6741209,43.68528,43.6937577,43.6979041,43.7225969,43.722931,43.7341489,43.7403259,43.7441546,43.7574704,43.7768461,43.7773855,43.7987115,43.7999498,43.8022258,43.8034456,43.8229374,43.835631,43.8366461,43.8416125,43.8512293,43.8602847,43.863056,43.8788349,43.9468945,43.959349,43.988333,44.042366,44.115278,44.139951,44.1984238,44.206622,44.2125,44.221558,44.246111,44.253272,44.300777,44.331111,44.350776,44.400833,44.431293,44.519722,44.821667,44.839167,44.86152,44.9,45.054167],[43.5220851,43.7380201,43.6537882,43.876519,43.81722,43.9127396,44.0255211,43.7279879,43.9103428,42.9074849,44.1908915,43.7422799,43.9045102,44.2119773,43.8366936,44.3730212,44.2423294,44.123883,43.7606476,44.3636557,44.1512948,43.7185553,44.2144826,43.93194,44.209298,43.6027046,43.9317439,43.8943217,44.4137575,43.7974629,44.09972,43.1949731,43.437182,43.6042641,43.884179,43.8415817,44.1403481,43.7589165,43.9948064,43.6106262,43.83417,43.3469916,44.3515401,44.0926551,44.1305288,44.1436978,44.26917,44.12444,43.4030838,43.6384818,44.155556,43.4203399,44.025223,43.4982674,44.3740591,44.2973614,43.5178739,43.66667,43.2767476,44.2133042,43.8850094,43.5216499,43.0370284,43.1932675,43.3510112,43.7156896,43.2600149,43.4442485,43.6393754,43.3276187,43.1460561,43.7706143,43.1114348,43.1531165,43.6079187,43.2063942,43.2292012,43.2514048,41.913472,43.1074819,43.1721222,41.743847,41.738889,41.764098,41.828056,41.853875,41.6999648,41.87764,43.7,41.899453,41.741389,41.900047,41.742693,41.934722,41.801334,41.935,41.763092,40.710278,40.501667,41.486111,41.335,40.483,39.946389],5,null,["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],{"interactive":true,"className":"","stroke":false,"color":"#03F","weight":1,"opacity":0.5,"fill":true,"fillColor":["#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#8D63B9","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#8D63B9","#8D63B9","#3B8BC6","#3B8BC6","#3B8BC6","#8D63B9","#3B8BC6","#3B8BC6","#3B8BC6","#8D63B9","#3B8BC6","#3B8BC6","#3B8BC6","#8D63B9","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#8D63B9","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#8D63B9","#8D63B9","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#E62651","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#3B8BC6","#E62651","#3B8BC6","#35A532","#3B8BC6","#E62651","#35A532","#35A532","#35A532","#35A532","#35A532","#35A532","#35A532","#8D63B9","#35A532","#F78716","#35A532","#F78716","#35A532","#35A532","#35A532","#35A532","#35A532","#35A532","#F78716","#F78716","#35A532","#F78716"],"fillOpacity":1},null,null,["<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>","<a href='https://glottolog.org/resource/languoid/id/kaba1278' target='_blank'>Kabardian<\/a><br>"],null,null,{"interactive":false,"permanent":false,"direction":"right","opacity":1,"offset":[7.5,0],"textsize":"10px","textOnly":true,"style":{"font-size":"15px","font-family":"sans-serif"},"className":"","sticky":true},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addLegend","args":[{"colors":["#3B8BC6","#F78716","#35A532","#E62651","#8D63B9"],"labels":["Baksan","Besleney","Kuban","Malkin","Terek"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"Kabardian ","extra":null,"layerId":null,"className":"info legend","group":null}]}],"limits":{"lat":[43.0925184,45.054167],"lng":[39.946389,44.4137575]}},"evals":[],"jsHooks":[]}</script>
</div>
<script>
HTMLWidgets.addPostRenderHandler(function() {
var leaf_widgets = {};
                Array.prototype.map.call(
                 document.querySelectorAll(".leaflet"),
                   function(ldiv){
                     if (HTMLWidgets.find("#" + ldiv.id) && HTMLWidgets.find("#" + ldiv.id).getMap()) {
                        leaf_widgets[ldiv.id] = HTMLWidgets.find("#" + ldiv.id).getMap();
                     }
                   }
                );
               

leaf_widgets['htmlwidget-3176'].sync(leaf_widgets['htmlwidget-6334'],{syncCursor: true, noInitialSync: false});
leaf_widgets['htmlwidget-6334'].sync(leaf_widgets['htmlwidget-3176'],{syncCursor: true, noInitialSync: false});

});
</script>
<p>As you can see we provided a <code>circassian$language</code> to the
<code>facet</code> argument, so it returned a list of two maps that
stored in <code>faceted</code> variable.</p>
<p>It is also possible to combine any maps that were created, just store
them in a variable, and combine them in <code>latticeview()</code> and
<code>sync()</code> functions</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>m1 <span class="ot">&lt;-</span> <span class="fu">map.feature</span>(<span class="fu">lang.aff</span>(<span class="st">&quot;Tsezic&quot;</span>), <span class="at">label =</span> <span class="fu">lang.aff</span>(<span class="st">&quot;Tsezic&quot;</span>))</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>m2 <span class="ot">&lt;-</span> <span class="fu">map.feature</span>(<span class="fu">lang.aff</span>(<span class="st">&quot;Avar-Andi&quot;</span>), <span class="at">label =</span> <span class="fu">lang.aff</span>(<span class="st">&quot;Avar-Andi&quot;</span>))</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a><span class="fu">sync</span>(m1, m2)</span></code></pre></div>
</div>
<div id="get-data-from-openstreetmap-with-overpass"
class="section level3">
<h3>4. Get data from OpenStreetMap with <code>overpass</code></h3>
<p>This section is inspired by talk with <a
href="https://github.com/nikopartanen">Niko Partanen</a> and his <a
href="https://gist.github.com/nikopartanen/f5b4a325808ea8993bfb14b9f81cdfc1">gist</a>.
<a href="https://github.com/hrbrmstr/overpass">Overpass</a> is a packge
with tools to work with the OpenStreetMap (OSM) <a
href="https://wiki.openstreetmap.org/wiki/Overpass_API">Overpass
API</a>. Explore simple Overpass queries with <a
href="https://overpass-turbo.eu/">overpass turbo</a>. Imagine that we
need to get all settlements from Ingushetia, Daghestan and Chechnya. So,
first, load a library:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="fu">library</span>(overpass)</span></code></pre></div>
<p>Create a query:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a>settlements <span class="ot">&lt;-</span> <span class="st">&#39;area[name~&quot;Дагестан|Ингушетия|Чечня&quot;];</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="st">(node[&quot;place&quot;~&quot;city|village|town|hamlet&quot;](area););</span></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a><span class="st">out;&#39;</span></span></code></pre></div>
<p>Pass the query to <code>overpass_query()</code> function and change
the input result to dataframe:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a>query_result <span class="ot">&lt;-</span> <span class="fu">overpass_query</span>(settlements)</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a>settlement_data <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(query_result[, <span class="fu">c</span>(<span class="st">&quot;id&quot;</span>, <span class="st">&quot;lon&quot;</span>, <span class="st">&quot;lat&quot;</span>, <span class="st">&quot;name&quot;</span>)])</span></code></pre></div>
<p>Some values could be <code>NA</code>, so I profer clean it with
<code>complete.cases()</code> function:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a>settlement_data <span class="ot">&lt;-</span> settlement_data[<span class="fu">complete.cases</span>(settlement_data),]</span></code></pre></div>
<p>On the last step, I will use a “fake” language argument to avoid the
creation of some Glottolog links:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="fu">map.feature</span>(<span class="at">language =</span> <span class="st">&quot;fake&quot;</span>,</span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a>            <span class="at">latitude =</span> settlement_data<span class="sc">$</span>lat,</span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a>            <span class="at">longitude =</span> settlement_data<span class="sc">$</span>lon,</span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a>            <span class="at">label =</span> settlement_data<span class="sc">$</span>name)</span></code></pre></div>
<p>Results are not ideal: there are some villages Дагестанская and
Красный Дагестан in Adygeya and Krasnodarskiy district, but the most
points are correct. It is also possible to get all data from some
polygone created with <code>mapedit</code> (see previous section).</p>
</div>
<div id="create-your-own-atlas-with-rmarkdown" class="section level3">
<h3>5. Create your own atlas with <code>rmarkdown</code></h3>
<p>This section is inspired by talk with <a
href="https://github.com/nikopartanen">Niko Partanen</a>. It is possible
to create an atlas website using <code>lingtypology</code> and <a
href="https://github.com/rstudio/rmarkdown"><code>rmarkdown</code></a>
packages. The function <code>atlas.database()</code> creates a folder in
the working directory that contains an <code>rmarkdown</code> template
for a web-site.</p>
<p>First, lets create a <code>dataframe</code> with some data.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">wals.feature</span>(<span class="fu">c</span>(<span class="st">&quot;1a&quot;</span>, <span class="st">&quot;20a&quot;</span>))</span></code></pre></div>
<pre><code>## Don&#39;t forget to cite the source (modify in case of using individual chapters):
## 
## Dryer, Matthew S. &amp; Haspelmath, Martin (eds.) 2013. The World Atlas of Language Structures Online. Leipzig: Max Planck Institute for Evolutionary Anthropology.
## (Available online at https://wals.info/, Accessed on 2024-03-13.)
## 
## @book{wals,
##   address   = {Leipzig},
##   editor    = {Matthew S. Dryer and Martin Haspelmath},
##   publisher = {Max Planck Institute for Evolutionary Anthropology},
##   title     = {WALS Online},
##   url       = {https://wals.info/},
##   year      = {2013}
## }</code></pre>
<p>Second we can create a website using <code>atlas.database()</code>
function:</p>
<ul>
<li><code>languages</code> argument is a language list</li>
<li><code>features</code> argument is a data.frame with corresponding
features</li>
<li><code>latitude</code> and <code>longitude</code> arguments are
optional</li>
</ul>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="fu">atlas.database</span>(<span class="at">languages =</span> df<span class="sc">$</span>language,</span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a>               <span class="at">features =</span> df[,<span class="fu">c</span>(<span class="dv">4</span><span class="sc">:</span><span class="dv">5</span>)],</span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a>               <span class="at">latitude =</span> df<span class="sc">$</span>latitude,</span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a>               <span class="at">longitude =</span> df<span class="sc">$</span>longitude,</span>
<span id="cb23-5"><a href="#cb23-5" tabindex="-1"></a>               <span class="at">atlas.name =</span> <span class="st">&quot;Some WALS features&quot;</span>,</span>
<span id="cb23-6"><a href="#cb23-6" tabindex="-1"></a>               <span class="at">author =</span> <span class="st">&quot;Author Name&quot;</span>)</span></code></pre></div>
<p>We can see that this function creates a subfolder with following
files:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="fu">list.files</span>(<span class="st">&quot;./atlas_Some_WALS_features/&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;_site.yml&quot;    &quot;1._1a.Rmd&quot;    &quot;2._20a.Rmd&quot;   &quot;database.csv&quot; &quot;footer.html&quot; 
## [6] &quot;index.Rmd&quot;</code></pre>
<p>The last step is to run a command:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a>rmarkdown<span class="sc">::</span><span class="fu">render_site</span>(<span class="st">&quot;./atlas_Some_WALS_features/&quot;</span>)</span></code></pre></div>
<p>Then the atlas website will be created (here is <a
href="https://agricolamz.github.io/lingtypology_atlas_example/index.html">a
result</a>). If you want to change something in the website, just change
some files:</p>
<ul>
<li>write information about atlas in index.Rmd file</li>
<li>list citation information</li>
<li>change any <code>.Rmd</code> file</li>
<li>…</li>
<li>and on the end rerun the
<code>rmarkdown::render_site("./atlas_Some_WALS_features/")</code>
command.</li>
</ul>
</div>
<div id="create-.kml-file-using-sp-and-rgdal" class="section level3">
<h3>6. Create .kml file using <code>sp</code> and
<code>rgdal</code></h3>
<p>.kml file is a common file type for geospatial data. This kind of
files are used in <a
href="https://en.wikipedia.org/wiki/Google_Earth">Google Earth</a>, <a
href="http://www.gabmap.nl/">Gabmap</a> (a web application that
visualizes dialect variations) and others. In order to produce a .kml
file you need to have a dataset with coordinates such as
<code>circassian</code>:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a>sp<span class="sc">::</span><span class="fu">coordinates</span>(circassian) <span class="ot">&lt;-</span> <span class="er">~</span>longitude<span class="sc">+</span>latitude</span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a>sp<span class="sc">::</span><span class="fu">proj4string</span>(circassian) <span class="ot">&lt;-</span> sp<span class="sc">::</span><span class="fu">CRS</span>(<span class="st">&quot;+proj=longlat +datum=WGS84&quot;</span>)</span>
<span id="cb27-3"><a href="#cb27-3" tabindex="-1"></a>rgdal<span class="sc">::</span><span class="fu">writeOGR</span>(circassian[<span class="st">&quot;village&quot;</span>],</span>
<span id="cb27-4"><a href="#cb27-4" tabindex="-1"></a>                <span class="st">&quot;circassian.kml&quot;</span>, </span>
<span id="cb27-5"><a href="#cb27-5" tabindex="-1"></a>                <span class="at">layer=</span><span class="st">&quot;village&quot;</span>,</span>
<span id="cb27-6"><a href="#cb27-6" tabindex="-1"></a>                <span class="at">driver=</span><span class="st">&quot;KML&quot;</span>)</span></code></pre></div>
</div>

<br>
<br>
<br>
<br>
<p> <center> &copy; G. Moroz code on
<a href="https://github.com/ropensci/lingtypology"> GitHub </center></p>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3,h4",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
